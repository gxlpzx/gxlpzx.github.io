<html>

<head>
<style type="text/css">
<!--
.ourfont{font-size: 12px;line-height: 17px;}
A:link {text-decoration: none; color: blue}
A:visited {text-decoration: none; color: "#54646D"}
A:active {text-decoration: none}
A:hover {text-decoration: underline; color: 000080} 
-->
</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>《电脑报》</title>
</head>

<body bgcolor="#FFFFFF">

<hr align="center" width="700">
<div align="center"><center>

<table border="0" width="700" cellspacing="0" cellpadding="4" bgcolor="#ECF7F4">
  <tr>
    <td width="100%" valign="top"><div align="center"><center><table border="0" width="680"
    cellspacing="0" cellpadding="4">
      <tr>
        <td width="672" valign="top"><p align="center"><font face="黑体" color="#004080"><strong>你的大硬盘浪费了多少空间</strong></font></td>
      </tr>
      <tr>
        <td width="672" valign="top"><p class="ourfont" align="left"><font color="#369681">　　如果说在一个装满应用软件的2GB～3GB硬盘上，也许浪费了四五百兆字节的空间，你肯定难以置信，但这种现象的确发生在大多数使用FAT 
        16文件分配系统的大容量硬盘上。<br>
        　　一、造成硬盘空间浪费的原因<br>
        　　FAT(File Allocation Table，文件分配表)文件系统最早用在采用MS－DOS操作系统的PC机上，现在仍在广泛使用。Windows 
        95为了保持同DOS的兼容性，也继续使用FAT。虽然FAT可满足大部分应用程序和用户的需要，但它却存在着某些先天不足之处，这主要是由于传统的FAT采用16位数字来分配磁盘空间，即采用的是16位文件分配表(称为FAT 
        16)。该文件分配表允许硬盘的一个分区中最多只能有65536(216)个簇，每簇最多有64个扇区，每个扇区512字节，所以一个分区的最大容量应该是65536×64×512/1000000≈2147GB。虽然Windows 
        95利用LBA模式可以为E－IDE硬盘提供保护模式的支持能力，使可访问的硬盘容量高达137GB，但由于Windows 
        95仍使用FAT 16文件系统来管理硬盘，所以硬盘分区的逻辑容量依然被限制在21GB以下。在所有类型的磁盘中，扇区都是磁盘上的最小存储空间单位，而且一个扇区的容量均为512字节，而簇又由扇区来组成。所以为了保证簇的总数不超过65536个和分区大小不超过21GB的限制，一个簇中的扇区数量必然随着硬盘分区的大小而各不相同。一般对于容量小于127MB的硬盘分区，簇的大小通常置为2048字节，当硬盘分区容量大于127MB时，簇的大小也要随着容量的增加而增加，如表1所示。但FAT 
        16在为文件分配磁盘空间时，是按照簇而不是按照扇区来分配的，由于在不同的硬盘分区上，簇的大小不同，这就不可避免地造成了硬盘空间的巨大浪费。<br>
        　　举例来说，当你在单个分区的12GB硬盘上存储60K字节的文件时，由于硬盘使用的簇容量为32KB，一个簇放不下这个文件，所以需要使用两个簇来存储，而两个簇的容量为64K，比存储一个文件的容量多4K字节，因此第二个簇中有八个扇区(4×1024/512=8)被闲置，由于这八个扇区无法被其它文件使用，所以这就意味着有4/64=6.25％的空间被浪费掉了，以上情况还算比较理想。如果你要存储的文件为32769字节(32K=32768字节)，那么这个文件仍然需要使用两个簇来存储，而第二个簇中的32KB空间只占用了1个字节，浪费的空间为32KB－1个字节，浪费率接近50％，这是最糟糕的情况。如果你要存储的文件为3201K，那么空间的浪费率近似为1％，这差不多接近了最理想的值。<br>
        　　从以上例子中可以看出，存储的文件越小，占用的簇数越少，则空间的浪费率越大；存储的文件越大，占用的簇数越多，空间的浪费率越小。我们的硬盘上除了有很少的字库文件和图像文件较大外，大多都是些较小的INI、BAT、COM、EXE等文件(以笔者使用的几台机器来说，整个硬盘上每个文件的平均长度约为80KB～120KB)。因此许多专家估计大容量硬盘的空间浪费率约在20％左右。对于一个使用1GB容量单分区硬盘的用户来说，这就意味着有可能损失近200MB的空间，而对于使用2GB单分区硬盘的用户来说，损失的空间甚至可能高达400MB到500MB。<br>
        　　二、减少硬盘空间浪费的三种方法：<br>
        　　1将硬盘分成若干个较小的分区，如小于256MB或512MB。<br>
        　　此法的优点是对于较小的硬盘还可以适应，如1GB以下的硬盘，只需分成2至4个分区，但是对于较大的硬盘不太适合，如超过2GB的硬盘，需要分成4至8个或更多的分区，这会导致过多的逻辑盘符，对于记性不好的用户来说，要找个软件得多付出几倍的时间，实在是有些得不偿失。因此笔者建议，对于2GB以上容量的硬盘，如从综合性能和可操作性来考虑的话，以单个分区容量为511MB和1023MB性能最佳。<br>
        　　2如机器内安装Windows NT操作系统，请使用NTFS文件系统。<br>
        　　Windows NT既可以使用FAT文件系统，也可以使用自己独特的NTFS文件系统，在使用FAT文件系统时，同DOS下的FAT完全兼容。而在使用NTFS文件系统时，FAT分区下的程序无法读写NTFS所在分区，但NTFS仍使用簇作为最小的分配单位，不过NTFS支持的簇的大小仅为512、1024、2048和4096字节，在NTFS中缺省的簇大小如表2所示(簇的大小是由NTFS格式化程序确定的，“磁盘管理器”下的“格式化”命令没有任何选项参数，但是从“我的电脑”文件夹或从命令提示符来进行格式化时，用户可以控制簇的大小)。采取这些缺省值是一种折衷的方案，既避免了由于簇太大而造成簇内空间的浪费，又避免了由于簇太小而产生的碎片。NTFS只与簇发生关系，而与物理扇区的大小无关，因此，NTFS文件系统非常适合管理大容量硬盘。<br>
        　　3使用即将发布的Windows 98。<br>
        　　中文Windows 95 OEM版，也有人称为PWin 97，在联想、同创国产品牌中都已预装。同Windows 
        95相比，PWin 97在“附件”中额外提供了“映像”、在“多媒体”中提供了“ACTIVEMOVIE控制”等项，另外还可以支持32位文件分配系统——FAT 
        32，其特点是每簇的大小仅为4K，因此可减少大硬盘的空间浪费现象，但据笔者使用的联想和同创机(1997年8月购买)来看，其17GB硬盘和12GB硬盘(单分区)却仍然使用32KB的簇。不过笔者使用的中文Windows 
        98的β2测试版中提供了FAT32转换器(在“附件”的“系统工具”项中)，可支持超过2GB的大分区，以一个2GB的硬盘分区来说，使用FAT32转换器将16位文件分配表转换为32位文件分配表系统后，每簇的容量即可从原来的32KB减小到4KB，极大地减少了硬盘空间的浪费现象。(河北　王素英)</font></p>
        <p align="right"><span class="ourfont"><font color="#369681">本文出自：</font><a
        href="index.htm">《电脑报》1998年2月23日第7期33版</a></span></td>
      </tr>
    </table>
    </center></div></td>
  </tr>
</table>
</center></div>
</body>
</html>
