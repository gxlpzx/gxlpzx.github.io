<html><!-- #BeginTemplate "/模板/maket.dwt" -->
<head>
<!-- #BeginEditable "doctitle" --> 
<title>驶入聊天快车道——OICQ无法上线的解决方法</title>
<!-- #EndEditable --> 
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link rel="stylesheet" href="library/DNB/2001/%C4%A3%B0%E5/cpcw.css">
</head>

<body bgcolor="#FFFFFF" leftmargin="0" topmargin="2" marginwidth="0" marginheight="0">
<table width="770" border="1" cellspacing="0" cellpadding="1" align="center" bordercolorlight="#CCCCCC" bordercolordark="#FFFFFF">
  <tr> 
    <td width="148" align="center"> <iframe src="http://www.yesky.com/adj/html/cpcw-left.htm" width="140" height="60" frameborder="0" scrolling="no"></iframe> 
    </td>
    <td width="473" align="center" height="61"> 
      
    </td>
    <td align="center" width="149"><iframe src="http://www.yesky.com/adj/html/cpcw-right.htm" width="140" height="60" frameborder="0" scrolling="no"></iframe></td>
  </tr>
</table>
<table width="770" border="0" cellspacing="0" cellpadding="0" align="center" height="22" bgcolor="#3366CC">
  <tr> 
    <td width="40" align="center" height="20"><img src="http://www.lpzx.edu.cn/library/DNB/2001/%C4%A3%B0%E5/images/b1.gif" width="14" height="14"></td>
    <td width="583" height="20"> <span class="wj">| <a href="library/DNB/2001/Templates/wrapup.html" class="wj"><font color="#FFFFFF">综合报道</font></a> 
      | <a href="library/DNB/2001/Templates/software.html"><font color="#FFFFFF">软件世界</font></a> | <a href="library/DNB/2001/Templates/hardware.html"><font color="#FFFFFF">硬件周刊</font></a> 
      | <a href="library/DNB/2001/Templates/internet.html"><font color="#FFFFFF">互联网时代</font></a> 
      | <a href="library/DNB/2001/Templates/oa.html"><font color="#FFFFFF">OA专刊</font> </a>| <a href="library/DNB/2001/Templates/game.html"><font color="#FFFFFF">游戏广场</font></a> 
      | <a href="library/DNB/2001/Templates/maket.html"><font color="#FFFFFF">评测与市场</font></a> | <a href="library/DNB/2001/Templates/zt.html"><font color="#FFFFFF">专题版</font> 
      </a>| <a href="http://www.cpcw.com"><font color="#FFFFFF">首页</font></a></span></td>
    <td align="right" width="147" rowspan="2"><img src="http://www.lpzx.edu.cn/library/DNB/2001/%C4%A3%B0%E5/images/b2.gif" width="147" height="22"></td>
  </tr>
  <tr> 
    <td colspan="2" bgcolor="#FFCF96" height="2"></td>
  </tr>
</table>
<table width="770" border="0" cellspacing="0" cellpadding="0" align="center" bgcolor="#FF9900" height="48">
  <tr> 
    <td width="174" valign="bottom"><img src="http://www.lpzx.edu.cn/library/DNB/2001/%C4%A3%B0%E5/images/a1.gif" width="169" height="38"></td>
    <td width="448" class="nava"><span class="nava"><font color="#FFFFFF">严正声明<br>
      　　未经许可，任何商业网站或个人网站都不得提供《电脑报》电子版的浏览或下载！违者我们将追究其法律责任！</font></span></td>
    <td align="right" width="148" valign="top"><img src="http://www.lpzx.edu.cn/library/DNB/2001/%C4%A3%B0%E5/images/b3.gif" width="147" height="38"></td>
  </tr>
</table>
<table width="770" border="0" cellspacing="0" cellpadding="0" align="center" height="11">
  <tr> 
    <td width="169" rowspan="2" valign="top"><img src="http://www.lpzx.edu.cn/library/DNB/2001/%C4%A3%B0%E5/images/a2.gif" width="169" height="11"></td>
    <td width="460" height="2" bgcolor="#D77201"></td>
    <td width="141" rowspan="2" valign="top"><img src="http://www.lpzx.edu.cn/library/DNB/2001/%C4%A3%B0%E5/images/a3.gif" width="160" height="9"></td>
  </tr>
  <tr>
    <td width="460" height="9"></td>
  </tr>
</table>
<table width="770" border="0" cellspacing="0" cellpadding="0" align="center">
  <tr> 
    <td colspan="3" valign="top"> 
      <table width="600" border="0" cellspacing="0" cellpadding="0" align="center">
        <tr> 
          <td class="nava"><font color="#FF9900">你所在的位置：&gt;&gt;<a href="http://www.cpcw.com">《电脑报》电子版</a> 
            &gt;&gt;<a href="library/DNB/2001/Templates/index.html">2001年<!-- #BeginEditable "%B5%DA%BC%B8%C6%DA" -->{第06期}<!-- #EndEditable --> 
            </a>&gt;&gt;<a href="library/DNB/2001/Templates/market.html">评测与市场</a></font></td>
        </tr>
      </table>
      <table width="600" border="0" cellspacing="0" cellpadding="0" align="center">
        <tr> 
          <td> 
            <div align="center"><!-- #BeginEditable "%CE%C4%D5%C2%B1%EA%CC%E2" -->{驶入聊天快车道——OICQ无法上线的解决方法}<!-- #EndEditable --></div>
          </td>
        </tr>
      </table>
      <table width="600" border="0" cellspacing="0" cellpadding="5" align="center">
        <tr> 
          <td> 
            <p><!-- #BeginEditable "%CE%C4%D5%C2%C4%DA%C8%DD" -->{ 许多169、教育网、上海热线的用户无法上OICQ，而有的163、吉通用户在网络繁忙时，抱怨OICQ的速度太慢。下面，笔者就针对这些用户的OICQ无法上线的问题，从原理到具体实践，提出一些解决方法，希望能对读者有所帮助。<br>
              一、无法上OICQ的原因<br>
              我们经常听到TCP/IP和UDP(用户数据报协议)这两个术语，它们都是建立在更低层的IP协议上的两种通讯传输协议。前者是以数据流的形式，将传输数据经分割、打包后，通过两台机器之间建立起的虚电路，进行连续的、双向的、严格保证数据正确性的文件传输协议。而后者是以数据报的形式，对拆分后的数据的先后到达顺序不做要求的文件传输协议。腾讯公司的OICQ就是使用UDP协议进行发送和接收“消息”的。当你的机器安装了OICQ以后，实际上，你既是服务端Server，又是客户端Client。OICQ的工作原理是：当你登录OICQ时，你的OICQ作为Client连接到腾讯公司的主服务器上，当你“看谁在线”时，你的OICQ又一次作为Client，从腾讯的Server上读取在线网友名单。当你和你的OICQ伙伴进行聊天时，如果你和对方的连接比较稳定(能Ping通、有稳定的Echo)，你和他的聊天内容都是以UDP的形式，在计算机之间传送。如果你和对方的连接不是很稳定(干脆就Ping不通、或数据断断续续，腾讯公司的sz.tencent.com服务器将为你们的聊天内容进行“中转”。如果你使用了Socks5代理服务器的话，你到腾讯服务器的信息将通过这个Socks5代理进行“中转”。<br>
              现在来介绍一下Socks代理的分类。Socks代理分为Socks4、Socks4.3和Socks5三种。由于OICQ只支持Socks5代理，我们就不对前面两种作过多的介绍。Socks5代理又可以分为“使用授权的”和“无须授权的”。简单地说，前者要用户输入用户名和密码，后者则是通常所说的免费的。<br>
              目前，腾讯公司的聊天服务器一共有八台，sz.tencent.com、sz1.tencent.com到sz7.tencent.com。大家可以研究一下它们的IP分布，只有sz3.tencent.com是在202.104.*.*这个网段上，其他都在202.96.*.*上。OICQ无法上线的原因在于：你的OICQ作为Client无法和sz系列服务器交换UDP数据报。你可以通过下面的方法验证一下：<br>
              在“开始”→“运行”中打入：Ping sz.tencent.com －t 看看是不是都出现Request Time Out(请求超时)，如果是，表示连接超时了，所以OICQ无法上线。<br>
              二、具体解决方法<br>
              1. 使用免费的Socks5代理<br>
              正如免费的HTTP代理一样，Socks5代理也有时效性。不过好在国内有许多天天更新的个人主页为大家发布免费的Socks5和HTTP代理：<br>
              kofp.126.com提供教育网代理<br>
              www.zaiyi.com提供教育网代理<br>
              dzc.126.com提供169、金桥网、吉通网、教育网、163代理<br>
              home.fj.cninfo.net/liyi/proxy.htm提供169、163代理<br>
              vip.6to23.com提供上海热线代理<br>
              www.thorryo.h58.net提供上海热线代理<br>
              一旦你的免费Socks5代理失灵或速度慢下来，快去上面提到的站点找找新的Socks5吧。每个网站上面都有通过免费Socks5代理上OICQ的配置图解，一看就会。<br>
              2. 交替使用免费的Socks5和“使用授权的Socks5代理”<br>
              很多“使用授权的Socks5代理”并不是对所有的访问范围都要使用密码校验机制的。也就是说，网管们出于网络安全考虑，只对使用防火墙的用户的某类IP地址访问加以限制，一般是要求提供用户名和口令后，方可使用代理访问。而大多数拨号用户的IP地址不在此访问限制列表之内，所以我们可以先用一个免费的Socks5代理，和腾讯的sz系列服务器建立连接，读取“好友名单”和其他必要的系统信息后，再换成“使用授权的Socks5代理”和OICQ聊友进行聊天。具体操作如下：<br>
              (1) 通过一个免费的Socks5“上线”，成功的标志是：小企鹅不再出现N/A的闪烁，你的“好友名单”已经从腾讯的服务器上读取完毕。并且，你可以“查看在线网友”。<br>
              (2) 选择“注册向导”→“网络设置”选项卡，在“使用PROXY SOCKET5防火墙”下面的小方框内填入一个“使用授权的”的Socks5代理的地址和端口号1080。点击“测试”，如果测试通过后，请不要重新“上线”。<br>
              (3) 继续你的OICQ聊天之旅吧。<br>
              这些“使用授权的Socks5代理”请到前面提到的网站中去找。<br>
              3. 使用CCProxy或Wingate软件<br>
              如果你单位的计算机或某个网友的计算机有固定的IP地址上网，你不妨和他商量一下，能否在他的电脑上安装CCProxy或Wingate软件，这样，只要他开机，你就可以将他的机器作为Socks5代理服务器，上OICQ了。不过，使用CCProxy的话，Socks5的端口号为1080，不能改变，小心那些用ProxyHunter的家伙们把你的IP地址公布出去。如果使用Wingate的话，虽然繁琐一点，但你可以改变你的Socks5的端口，如改成9999，一般的搜索软件是找不到的。<br>
              这两款代理服务器软件的具体使用介绍，请详见2001年1月8日《电脑报》E2版上的《两款代理服务器软件的使用》一文。<br>
              4. 使用HTTP代理上OICQ<br>
              www.totalrc.net是一个提供Access Internet Behind A Firewall(在防火墙后访问互联网)服务的国外网站，简言之，就是通过下载它提供的客户端服务程序Socks2HTTP将你所有的Socks5请求转化为HTTP请求，通过你的HTTP代理，送到www.totalrc.net的80端口此端口除了提供WWW浏览服务外，还提供了一项TCP→UDP的网关服务。经过www.totalrc.net这个网关，将HTTP请求再还原为Socks5请求，送往目的地。你的OICQ送出的UDP，本应该直接送往腾讯的sz系列服务器或直接送到你聊友机器的OICQ端口，通过使用Socks2HTTP软件后，你要送出的UDP数据报被Socks2HTTP截获，转化为TCP数据流，通过你指定的HTTP代理，送到www.totalrc.net的80端口，此时TCP又被还原成UDP，又经totalrc.net转发到腾讯的聊天服务器或你聊友的OICQ端口。<br>
              SocksCap32则是一款强制应用程序使用Socks 4或5的软件。这样，结合使用Socks2HTTP和SocksCap32软件，你就可以无须在OICQ中设置Socks5而直接用HTTP代理上OICQ了。<br>
              具体步骤如下：<br>
              (1)下载Socks2HTTP和SocksCap32软件<br>
              Socks2HTTP的英文版有一个“总在屏幕前方”的讨厌的广告条，而它的中文汉化版则无此广告条，但中文翻译得很差。下面以英文版为例做介绍。<br>
              (2) 安装Socks2HTTP<br>
              ①当安装程序完成文件复制后，会弹出^06080501a^1所示的系统参数配置窗口(如果你不是首次安装请用鼠标右键单击你的任务条右面下角的Socks2HTTP绿色图标选择Config项)。<br>
              ②在Proxy Configuration中的Use a proxy server的Address栏中输入你的HTTP代理的地址，在IP 
              Port后面输入你的HTTP代理的端口号。如果你是163用户或者你能在浏览器中快速打开www.totalrc.net，请选择第四项Do 
              not use http proxy(直接连接)。<br>
              例如：你找到了一个代理，假如为127.0.0.1端口为8088，请按图示填写。<br>
              如果你的HTTP代理要密码，请在Proxy Authentication下面填写用户名和密码即可。<br>
              ③在Gateway下面的第一个框内填入www.totalrc.net这个地址，在第二个框内填入端口号80。这里所说的Gateway网关不同于通常意义上的23号端口的Wingate网关。由于www.totalrc.net这台服务器肩负着WWW服务和TCP→UDP服务，所以负荷很重。实际上，可以将www.totalrc.net换成下列地址： 
              <br>
              worker1.totalrc.net<br>
              worker2.totalrc.net<br>
              worker3.totalrc.net<br>
              其中，worker2.totalrc.net只负责TCP→UDP服务，速度当然要快得多。推荐大家使用worker2。<br>
              ④Security下的Socks是你的计算机的Socks服务的端口号，缺省为1080。如果你不希望其它计算机使用你的Socks5端口，请选中Block 
              out other computer。<br>
              ⑤如果你对这个软件的工作原理感兴趣，请在Debugging的Log file后面填入一个形如C:\Windows\SocksCVT.TXT的文件名，记录此软件的运行情况Log 
              Level不用修改。此选项主要用于排错。<br>
              ⑥点击“完成”。<br>
              (3) 安装SocksCap32<br>
              ①待安装程序复制好文件以后，会弹出窗口。<br>
              ②在Server的SOCKS Server后面，填入127.0.0.1；在Port中填入1080。其中，127.0.0.1代表你的本地硬盘，不能改动；而1080表示是由Socks2HTTP软件产生的虚拟Socks5服务端的端口号(除非你在Socks2HTTP软件中改变了缺省的端口号，此处也要相应地变化)。<br>
              ③在Protocol下面，一定要选“SOCKS Version5”和“Resolve all names local”。因为OICQ只认Socks5代理。<br>
              ④点击“确定”后完成。<br>
              ⑤运行SocksCap32软件，单击SocksCap32快捷面板中的New按钮，出现一个标题为New Application Profile的窗口。在Profile 
              Name中输入OICQ，点击Command Line后面的Browse按钮，找到OICQ.EXE文件，并双击。如果你的OICQ没有安装在缺省路径C:\Program 
              Files\Oicq\Oicq.EXE下，请自己手动填写好CommandLine(Oicq.exe的绝对路径)和Working(Oicq.exe的工作目录，即Oicq.exe所在的目录)。点“确定”完成。<br>
              ⑥如果你嫌⑤的方法太繁琐，请按住Ctrl键，将桌面上的小企鹅图标拖动到SocksCap32的主窗口中，当系统问是否New Application 
              Profile时，点确定即可。^06080501c^3为一个已经添加FoxMail和OICQ的SocksCap32的界面。<br>
              (4)启动Socks2HTTP中文版，你的SysTray上会出现一个绿色的小图标。如果SocksCap32没有启动的话，请重新启动。请注意，一定要保证SocksCap32和Socks2HTTP两个软件都在运行。<br>
              (5)点击SocksCap32主窗口中的OICQ小企鹅(不是你桌面上的那只！)，运行OICQ程序。用这种办法，不用在OICQ的“注册向导”→“网络设置”选项卡中设置任何Socks5代理服务器了。<br>
              (6)聊你的天吧！以后，只须先启动Socks2HTTP，再启动SocksCap32，双击其中的小企鹅就可以上OICQ了。<br>
              三、HTTP代理的选择技巧<br>
              上面介绍的使用HTTP代理上OICQ的成败关键在于你选择的HTTP代理是否与www.totalrc.net有良好的Connect方式或GET/Post方式的连接。为了简单起见，我们利用NetAnts来对代理进行测试。<br>
              添加好新的代理后，向蚂蚁添加新任务。由于测试的是该HTTP代理到www.totalrc.net的连接状况，你可以将www.totalrc.net上的任意一个下载文件的连接添加到蚂蚁中去。看看蚂蚁的“示波器”上的情况如何。好的HTTP代理的标志是：“峰”要在保证连续的前提下，尽可能地高，并且为方波。<br>
              再测试一下该代理的GET/Post方式的连接情况，按上面的原则测试后，HTTP代理测试完成。在众多的HTTP代理中，必有一款适合你。<br>
              四、相关软件的下载地址<br>
              Ccproxy v3.0<br>
              http://microserver.top263.net<br>
              Wingate v4.0<br>
              http://www.tencent.com/download/<br>
              SocksCap32 英文版和中文汉化补<br>
              http://dzc.126.com<br>
              Socks2HTTP 中文版和英文版<br>
              http://dzc.126.com<br>
              希望上面介绍的方法，对读者能有所帮助。欢迎热心的读者和我交流，请发E－mail到我的信箱：kangfu2000＠etang.com。}<!-- #EndEditable --></p>
          </td>
        </tr>
      </table>
      <br>
      <br>
      <br>
    </td>
  </tr>
</table>
<table width="770" border="0" cellspacing="0" cellpadding="0" align="center" height="4" bgcolor="#FF9900">
  <tr> 
    <td width="161" bgcolor="#99CCFF"> </td>
    <td width="610" bgcolor="#FF9900"></td>
  </tr>
</table>
<table width="770" border="0" cellspacing="0" cellpadding="0" align="center">
  <tr> 
    <td> 
      <div align="center"><a href="bill/index.html" target="_blank"></a><a href="hdong/gao.htm" target="_blank"> 
        欢迎投稿 </a> | <a href="bill/index.html" target="_blank">广告联系</a>| <a href="serve/dnbjs.htm" target="_blank">关于我们</a>| 
        <a href="maillist/index.html" target="_blank">电子杂志</a>| <a href="hdong/zaopin.html" target="_blank">加入我们</a>| 
        <a href="hdong/xinsi.html" target="_blank">隐私条款</a></div>
    </td>
  </tr>
</table>
<table width="770" border="0" cellspacing="0" cellpadding="0" align="center">
  <tr> 
    <td> 
      <div align="center"><span class="nava"><font color="#000000" face="Arial, Helvetica, sans-serif"> 
        Copyright (C) 2000 Yesky.com, All Rights Reserved </font><font color="#000000"><br> 
        版权所有　 <font face="Arial, Helvetica, sans-serif"> Yesky </font><br> <a href="mailto:webmaster@yesky.com"> 
        如有意见请与我们联系 </a></font></span></div>
    </td>
  </tr>
</table>
</body>
<!-- #EndTemplate --></html>
